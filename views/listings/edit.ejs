<%layout("/layouts/boilerplate")%>

<div class="row mt-5 mb-5">
  <div class="col-lg-8 col-md-10 col-sm-12 offset-lg-2 offset-md-1">
    <h3 class="text-center mb-4">Edit Listing</h3>
    <form method="post" action="/listings/<%=listing._id %>?_method=PUT" class="needs-validation" novalidate enctype="multipart/form-data">
      
      <!-- Title -->
      <div class="mb-4">
        <label for="title" class="form-label">Edit Title:</label>
        <input type="text" name="listing[title]" id="title" value="<%=listing.title%>" class="form-control form-control-lg" placeholder="Listing title" required />
        <div class="valid-feedback">Title looks good!</div>
      </div>

      <!-- Description -->
      <div class="mb-4">
        <label for="description" class="form-label">Edit Description:</label>
        <textarea name="listing[description]" id="description" class="form-control form-control-lg" rows="4" placeholder="Listing description" required><%=listing.description %></textarea>
      </div>

      <!-- Location -->
      <div class="mb-4">
        <label for="location" class="form-label">Enter Location:</label>
        <input type="text" name="listing[location]" id="location" value="<%=listing.location%>" class="form-control form-control-lg" placeholder="Location of the listing" required />
        <div class="invalid-feedback">Please provide a valid location.</div>
      </div>

      <!-- Price and Country (side by side for larger screens) -->
      <div class="row">
        <div class="col-md-4 mb-4">
          <label for="price" class="form-label">Edit Price:</label>
          <input type="number" name="listing[price]" id="price" value="<%=listing.price %>" class="form-control form-control-lg" placeholder="Price" required />
          <div class="invalid-feedback">Please enter a valid price.</div>
        </div>

        <div class="col-md-8 mb-4">
          <label for="country" class="form-label">Enter Country:</label>
          <input type="text" name="listing[country]" id="country" value="<%=listing.country%>" class="form-control form-control-lg" placeholder="Country" required />
        </div>
         <!-- New Image Upload -->
      <div class="mb-4">
        <label for="image" class="form-label">Upload New Image:</label>
        <input type="file" name="listing[image]" id="image" class="form-control form-control-lg" />
      </div>

      </div>

      <!-- Old Image 
      <div class="mb-4">
        <h6 class="text-center">Old Image:</h6>
        <div class="text-center img">
          <img class="img-fluid rounded shadow-sm" src="<%=originalImage %>" alt="Old listing image" style="max-width: 25rem;" />
        </div>
      </div>
      -->

     
      <!-- Submit Button -->
      <div class="text-center">
        <button type="submit" class="btn btn-outline-success btn-lg px-5">Save Changes</button>
      </div>
    </form>
  </div>
</div>

<!-- Styling -->
<style>
  body {
    background-color: #f7f7f7;
    font-family: 'Roboto', sans-serif;
  }

  .form-label {
    font-weight: 600;
    font-size: 1rem;
    color: #333;
  }

  .form-control-lg {
    font-size: 1.1rem;
    border-radius: 10px;
    padding: 15px;
    border: 1px solid #ddd;
    transition: all 0.3s;
  }

  .form-control-lg:focus {
    border-color: #ff5a5f;
    box-shadow: 0 0 10px rgba(255, 90, 95, 0.2);
  }

  .btn-outline-success {
    border-radius: 50px;
    padding: 10px 20px;
    font-size: 1.1rem;
    font-weight: 500;
    transition: background-color 0.3s ease;
  }

  .btn-outline-success:hover {
    background-color: #28a745;
    color: white;
  }

  .text-center h3 {
    color: #ff5a5f;
  }

  .img-fluid {
    max-width: 100%;
    max-height: 15rem;
    padding-top: 0;
    margin-top: 0;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .btn-lg {
      width: 100%;
    }

    .form-control-lg {
      font-size: 1rem;
    }

    .offset-lg-2, .offset-md-1 {
      margin: 0;
    }

    .row {
      margin-top: 2rem;
    }
  }
</style>    

